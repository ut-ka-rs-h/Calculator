pipeline {
    agent any
    stages {
	    stage('Build') { // build and tag docker image
		steps {
		    	script {  
				sh "docker build -t https://utkarsh233.jfrog.io/artifactory/docker-quickstart-local/my-docker-image ."
		    	}
		}
	    }

	    stage('Upload'){
		steps {
			script {  
				docker.withRegistry('https://utkarsh233.jfrog.io', 'jfrog') {
					sh "docker push utkarsh233.jfrog.io/artifactory/docker-quickstart-local/my-docker-image"
				}
			}
		}
	    }
    }
}
